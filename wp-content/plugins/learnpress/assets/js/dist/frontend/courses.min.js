(()=>{lpGlobalSettings.courses_url;const e=document.location.href;let t,r,o,s,n=JSON.parse(window.localStorage.getItem("lp_filter_courses"))||{},c=!1,l=1;lpGlobalSettings.is_course_archive&&(window.location.search.length||-1!==e.search("page")||(n={}));const a=(e,t)=>{const r=new URL(e);return Object.keys(t).forEach((e=>{r.searchParams.set(e,t[e])})),r};window.lpArchiveRequestCourse=(e,o)=>{const n=lpGlobalSettings.lp_rest_url;if(!n)return;if(!t)return;const u=s&&s.querySelector("div.lp-archive-courses .lp-content-area"),p=u&&u.querySelector("ul.learn-press-courses");if(!p)return;if(c)return;c=!0,r?p.append(t):r=t.outerHTML;const h=a(n+"lp/v1/courses/archive-course",{...lpGlobalSettings.lpArchiveSkeleton,...e}),d=lpGlobalSettings.lp_rest_url+"lp/v1/courses/archive-course"+h.search;fetch(d,{method:"GET"}).then((e=>e.json())).then((e=>{void 0!==e.data.content&&p&&(p.innerHTML=e.data.content||"");const t=e.data.pagination,r=document.querySelector(".learn-press-pagination");if(r&&r.remove(),void 0!==t){const e=(new DOMParser).parseFromString(t,"text/html").querySelector(".learn-press-pagination");e&&(p.after(e),i())}wp.hooks.doAction("lp-js-get-courses",e),"function"==typeof o&&o(e)})).catch((e=>{p.innerHTML+=`<div class="lp-ajax-message error" style="display:block">${e.message||"Error: Query lp/v1/courses/archive-course"}</div>`,console.log(e)})).finally((()=>{if(c=!1,jQuery("form.search-courses button").removeClass("loading"),l)l=0;else{const e={behavior:"smooth"};s.scrollIntoView(e)}window.localStorage.setItem("lp_filter_courses",JSON.stringify(e));const t=a(document.location,e);window.history.pushState("","",t)}))};const i=()=>{const e=document.querySelectorAll(".lp-archive-courses .learn-press-pagination .page-numbers");e.length>0&&e.forEach((r=>r.addEventListener("click",(o=>{if(o.preventDefault(),o.stopPropagation(),!s)return;t&&(t.style.display="block"),s.scrollIntoView({behavior:"smooth"});let n={};if(n=JSON.parse(window.localStorage.getItem("lp_filter_courses"))||{},o.currentTarget.getAttribute("href")){const t=[...e].filter((e=>e.classList.contains("current"))),s=o.currentTarget.textContent||r.classList.contains("next")&&parseInt(t[0].textContent)+1||r.classList.contains("prev")&&parseInt(t[0].textContent)-1;n.paged=s,lpArchiveRequestCourse({...n})}}))))};function u(){t=document.querySelector(".lp-archive-course-skeleton"),o=document.querySelector(".no-first-load-ajax"),t&&(o||lpArchiveRequestCourse(n),i(),(()=>{const e=document.querySelectorAll("form.search-courses"),r=JSON.parse(window.localStorage.getItem("lp_filter_courses"))||{};e.forEach((e=>{const o=e.querySelector('input[name="c_search"]'),s=e.querySelector('[type="submit"]');let n;o.addEventListener("keyup",(e=>{t&&(t.style.display="block"),e.preventDefault();const o=e.target.value.trim();(!o||o&&o.length>2)&&(void 0!==n&&clearTimeout(n),n=setTimeout((function(){s.classList.add("loading"),r.c_search=o,r.paged=1,lpArchiveRequestCourse({...r})}),800))})),e.addEventListener("submit",(t=>{t.preventDefault();const r=e.querySelector('input[name="c_search"]');r&&r.dispatchEvent(new Event("keyup"))}))}))})()),(()=>{const e=document.querySelectorAll('.lp-archive-courses input[name="lp-switch-layout-btn"]');e.length>0&&e.forEach((e=>e.addEventListener("change",(e=>{e.preventDefault();const t=e.target.value;if(t){const e=document.querySelector(".lp-archive-courses .learn-press-courses[data-layout]");e&&(e.dataset.layout=t),LP.Cookies.set("courses-layout",t)}}))))})(),(()=>{const e=LP.Cookies.get("courses-layout"),t=document.querySelectorAll('.lp-courses-bar .switch-layout [name="lp-switch-layout-btn"]');t.length>0&&[...t].map((t=>t.value===e&&(t.checked=!0)))})()}const p=setInterval((function(){void 0!==lpGlobalSettings.lpArchiveSkeleton&&(t=document.querySelector(".lp-archive-course-skeleton"),s=document.querySelector(".lp-archive-courses"),s&&t&&(u(),clearInterval(p)))}),1)})();